import{l as J,a as K,A as Q,c as $,B as W,av as X,q as p,C as P,o as i,D as y,E as n,h as e,G as v,t as A,g as Y,$ as R,f as _,e as L,N as Z,F as M,j as B,J as ee,K as te,y as oe,r as E,I as le}from"./app-CSosM33B.js";import{n as ae,c as ne}from"./notify-B3uo9RRx.js";import{E as re,a as se}from"./index-CqnwlE3p.js";import{E as ie,a as de}from"./index-CcxL_kiJ.js";import{E as ue}from"./index-Dig24fm9.js";import{E as T}from"./index-DHmZDRdL.js";import{E as ce}from"./index-ZTo4Eioy.js";import{a as z,E as G}from"./index-CjUXJ7DM.js";import"./focus-trap-oW3Oz0pJ.js";import"./validator-DN1lxiX_.js";import"./castArray-84ZwkcTC.js";import"./clone-CdkeVV7A.js";import"./_baseClone-B546CWjF.js";import"./isEqual-B2A1MZL7.js";import"./_initCloneObject-C1N_ki7v.js";import"./isUndefined-DCTLXrZ8.js";import"./index-B69GrENz.js";import"./index-CwAalyKH.js";import"./_baseIteratee-CcDVmX61.js";import"./merge-_9lU3S1-.js";import"./isArrayLikeObject-C0bNowXW.js";import"./index-DpC6it7c.js";const O=J("forward",{state:()=>({panel:{visible:!1,loading:!1,edit:{id:null,name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});var N=(s=>(s[s.Stop=0]="Stop",s[s.Running=1]="Running",s[s.AlreadyUsed=2]="AlreadyUsed",s))(N||{});const j=s=>(ee("data-v-94f54135"),s=s(),te(),s),me={class:"mb-2 ml-20"},pe={class:"flex flex-row items-center w-72"},ve=j(()=>_("span",{class:"basis-14 text-center text-base"},":",-1)),_e={class:"forward-arrow"},fe={key:0,class:"el-icon-bottom"},ye={key:1,class:"el-icon-top"},we={class:"flex flex-row items-center w-72"},be=j(()=>_("span",{class:"basis-14 text-center text-base"},":",-1)),Ve={class:"flex flex-row"},ge=K({__name:"ForwardDialog",emits:["save"],setup(s,{emit:w}){const f=Q({host:null}),C=w,g=O(),t=$(()=>g.panel),S=$(()=>t.value.edit.type=="Dynamic"?"1080":"port"),d=$(()=>{switch(t.value.edit.type){case"Local":return R("ssh.portForward.local");case"Remote":return R("ssh.portForward.remote")}return R("ssh.portForward.dynamic")});W(()=>t.value.edit.type,u=>{t.value.edit.id||(t.value.edit.remoteHost=u=="Remote"?f.host:"127.0.0.1")}),X(()=>{p.on("config",u=>{Object.assign(f,u)})});const k=()=>{C("save",t.value.edit),t.value.loading=!0};return(u,a)=>{const x=P("RedMark"),U=re,H=se,b=ie,V=ue,D=T,F=de,l=P("vsc-button"),h=ce;return i(),y(h,{ref:"editDialog",modelValue:t.value.visible,"onUpdate:modelValue":a[11]||(a[11]=o=>t.value.visible=o),title:"Port Fowarding",width:"550px",top:"3vh",closeOnClickModal:!1},{footer:n(()=>[e(l,{type:"secondary",onClick:a[10]||(a[10]=o=>t.value.visible=!1)},{default:n(()=>[v(A(Y(R)("common.cancel")),1)]),_:1}),e(l,{loading:t.value.loading,onClick:k},{default:n(()=>[v("Save")]),_:1},8,["loading"])]),default:n(()=>[e(F,{ref:"infoForm",model:t.value.edit,"label-width":"120px"},{default:n(()=>[_("div",me,A(d.value),1),e(b,null,{label:n(()=>[e(x),v("Type ")]),default:n(()=>[e(H,{modelValue:t.value.edit.type,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.edit.type=o),type:"relax"},{default:n(()=>[e(U,{modelValue:t.value.edit.type,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.edit.type=o),value:"Local"},{default:n(()=>[v("Local")]),_:1},8,["modelValue"]),e(U,{modelValue:t.value.edit.type,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.edit.type=o),value:"Remote"},{default:n(()=>[v("Remote")]),_:1},8,["modelValue"]),e(U,{modelValue:t.value.edit.type,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.edit.type=o),value:"Dynamic"},{default:n(()=>[v(" Dynamic(Socks Proxy) ")]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(b,null,{label:n(()=>[e(x),v("Local ")]),default:n(()=>[_("div",pe,[e(V,{modelValue:t.value.edit.localHost,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.edit.localHost=o),class:"basis-72"},null,8,["modelValue"]),ve,e(V,{modelValue:t.value.edit.localPort,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.edit.localPort=o),placeholder:S.value,class:"basis-32"},null,8,["modelValue","placeholder"])])]),_:1}),t.value.edit.type!="Dynamic"?(i(),L(M,{key:0},[_("div",_e,[t.value.edit.type=="Remote"?(i(),L("i",fe)):(i(),L("i",ye))]),e(b,null,{label:n(()=>[e(x),v("Remote ")]),default:n(()=>[_("div",we,[e(V,{modelValue:t.value.edit.remoteHost,"onUpdate:modelValue":a[6]||(a[6]=o=>t.value.edit.remoteHost=o),class:"basis-72"},null,8,["modelValue"]),be,e(V,{modelValue:t.value.edit.remotePort,"onUpdate:modelValue":a[7]||(a[7]=o=>t.value.edit.remotePort=o),placeholder:"port",class:"basis-32",onKeyup:Z(k,["enter"])},null,8,["modelValue"])])]),_:1})],64)):B("",!0),_("div",Ve,[e(b,{label:"Name",class:"w-64"},{default:n(()=>[e(V,{modelValue:t.value.edit.name,"onUpdate:modelValue":a[8]||(a[8]=o=>t.value.edit.name=o)},null,8,["modelValue"])]),_:1}),e(b,{class:"auto-start-form-item",label:"Auto Start",title:"Auto start with VS Code startup"},{default:n(()=>[e(D,{modelValue:t.value.edit.autoStartUp,"onUpdate:modelValue":a[9]||(a[9]=o=>t.value.edit.autoStartUp=o),class:"ml-2"},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),ke=oe(ge,[["__scopeId","data-v-94f54135"]]),he=K({__name:"ForwardServerTable",props:{serverList:Array},emits:["selectServer"],setup(s,{emit:w}){const f=w;return(C,g)=>{const t=G,S=P("vsc-button"),d=z;return i(),y(d,{data:s.serverList,style:{width:"100%"}},{default:n(()=>[e(t,{prop:"key",label:"Key",width:"150",align:"center"}),e(t,{prop:"name",label:"Name",width:"350",align:"center"}),e(t,{prop:"count",label:"Count",width:"70",align:"center"}),e(t,{label:"Operation",width:"90",align:"center"},{default:n(({row:k})=>[e(S,{type:"icon",icon:"codicon-edit",title:"edit",onClick:u=>f("selectServer",k)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])}}}),Ce={class:"ml-2 my-1 text-base"},Se={class:"ml-5"},Je=K({__name:"forward",setup(s){const w=E(""),f=E(null),C=E([]),g=E([]),t=E(!1),S=O(),d=$(()=>S.panel);le(()=>{p.on("forwardList",l=>{g.value=l,d.value.loading=!1,d.value.visible=!1}).on("serverList",l=>{C.value=l}).on("name",l=>{w.value=l}).on("success",()=>{p.emit("load")}).on("error",({id:l,message:h})=>{for(const o of g.value)o.id==l&&(o.loading=!1);d.value.loading=!1,ae({message:h,type:"error"})}).init()});const k=l=>{w.value=l.name,f.value=l.key,t.value=!1,p.emit("selectServer",l.key)},u=l=>{p.emit("save",{info:l,serverKey:f.value})},a=()=>{d.value.edit={type:"Local",autoStartUp:!1,localHost:"127.0.0.1",remoteHost:"127.0.0.1"},d.value.visible=!0},x=()=>{p.emit("load")},U=l=>{switch(l){case N.Running:return"Running";case N.AlreadyUsed:return"AlreadyUsed";default:return"Stop"}},H=l=>{l.loading=!0,p.emit("start",l.id)},b=l=>{p.emit("stop",l)},V=l=>{p.emit("remove",{id:l,serverKey:f.value})},D=l=>{d.value.edit={...l},d.value.visible=!0},F=l=>{ne(R("confirm.deleteForward")).then(()=>{V(l)})};return(l,h)=>{const o=P("vsc-button"),c=G,I=T,q=z;return i(),L("div",null,[t.value?(i(),y(he,{key:0,serverList:C.value,onSelectServer:k},null,8,["serverList"])):(i(),L(M,{key:1},[_("div",Ce,[e(o,{type:"icon",icon:"el-icon-d-arrow-left",onClick:h[0]||(h[0]=r=>t.value=!0)}),e(o,{type:"icon",icon:"codicon-add text-base",style:{color:"var(--vscode-terminal-ansiCyan)"},onClick:a}),e(o,{type:"icon",icon:"codicon-refresh text-base",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},onClick:x}),_("span",Se,"Connection: "+A(w.value),1)]),e(q,{data:g.value,style:{width:"100%"}},{default:n(()=>[e(c,{prop:"name",label:"Name"}),e(c,{prop:"type",label:"Type"}),e(c,{prop:"localPort",label:"Local Port"}),e(c,{prop:"remoteHost",label:"Remote Host",width:"120"}),e(c,{prop:"remotePort",label:"Remote Port",width:"120"}),e(c,{prop:"keepAlive",label:"KeepAlive"},{default:n(r=>[e(I,{modelValue:r.row.keepAlive,"onUpdate:modelValue":m=>r.row.keepAlive=m,onChange:m=>u(r.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(c,{prop:"autoStartUp",label:"AutoStart"},{default:n(r=>[e(I,{modelValue:r.row.autoStartUp,"onUpdate:modelValue":m=>r.row.autoStartUp=m,onChange:m=>u(r.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(c,{prop:"state",label:"State"},{default:n(r=>[r.row.state==0?(i(),y(o,{key:0,type:"icon",icon:"el-icon-close text-base text-red"})):r.row.state==1?(i(),y(o,{key:1,type:"icon",icon:"el-icon-check text-base text-green"})):(i(),y(o,{key:2,type:"icon",icon:"el-icon-video-pause text-base text-yellow"})),v(" "+A(U(r.row.state)),1)]),_:1}),e(c,{fixed:"right",width:"200"},{default:n(r=>[r.row.state!=1?(i(),y(o,{key:0,type:"success",size:"small",title:"Start",loading:r.row.loading,icon:"el-icon-video-play",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},circle:"",onClick:m=>{H(r.row)}},null,8,["loading","onClick"])):B("",!0),r.row.state==1?(i(),y(o,{key:1,type:"danger",size:"small",title:"Stop",icon:"el-icon-switch-button",circle:"",onClick:m=>{b(r.row.id)}},null,8,["onClick"])):B("",!0),e(o,{type:"primary",size:"small",title:"Edit",icon:"el-icon-edit",style:{color:"var(--vscode-terminal-ansiCyan)"},circle:"",onClick:m=>{D(r.row)}},null,8,["onClick"]),e(o,{title:"delete",type:"danger",size:"small",icon:"el-icon-delete",style:{color:"#f56c6c"},circle:"",onClick:m=>F(r.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])],64)),e(ke,{onSave:u})])}}});export{Je as default};
