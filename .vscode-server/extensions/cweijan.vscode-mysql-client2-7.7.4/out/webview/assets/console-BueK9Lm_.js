import{n as O,s as se,e as G}from"./notify-B3uo9RRx.js";import{a as Q,o as v,e as _,f as a,X as ie,n as ae,y as F,s as re,r as p,I as J,q as u,C as q,h as t,E as n,t as l,G as i,g as S,j as T,J as ce,K as de,c as ue,F as K,x as U,D as j,$ as W}from"./app-CSosM33B.js";import{E as me}from"./index-BLzOhdyJ.js";import{E as pe}from"./index-DHmZDRdL.js";import{E as X}from"./index-Dig24fm9.js";import{E as ve,a as fe}from"./index-DT1kZQY9.js";import{E as ge}from"./index-DpC6it7c.js";import"./focus-trap-oW3Oz0pJ.js";import"./validator-DN1lxiX_.js";import"./index-CwAalyKH.js";import"./isUndefined-DCTLXrZ8.js";import"./index-B69GrENz.js";import"./index-3vLwHw63.js";import"./isEqual-B2A1MZL7.js";import"./index-D5RJZE9_.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-CcDVmX61.js";import"./castArray-84ZwkcTC.js";const ye={class:"card"},Ce=Q({__name:"Card",props:{full:Boolean},setup($){return(m,g)=>(v(),_("div",{class:ae(["card-container",{"card-container-full":$.full}])},[a("div",ye,[ie(m.$slots,"default",{},void 0,!0)])],2))}}),B=F(Ce,[["__scopeId","data-v-798fd364"]]),_e=$=>(ce("data-v-a4cc8481"),$=$(),de(),$),$e={style:{"min-width":"300px"}},be={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},we={class:"mt-4 mb-2"},he={class:"text-right mt-2"},ke={class:"mt-4 mb-2"},Se={class:"text-right mt-2"},ze={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},Ve=_e(()=>a("i",{class:"el-icon-document"},null,-1)),Ee={class:"my-2"},Oe={class:"mr-2"},Le={style:{"margin-top":"5px","margin-bottom":"10px"}},xe={style:{"text-align":"right",margin:"0"}},We={style:{"margin-top":"5px","margin-bottom":"10px"}},Ae={style:{"text-align":"right",margin:"0"}},Be={style:{"margin-top":"5px","margin-bottom":"10px"}},Ie={style:{"text-align":"right",margin:"0"}},Pe={style:{"margin-top":"20px"}},Ne={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},Ke={key:0,class:"mt-3 mb-2"},Ue={class:"mt-3 mb-2"},je={class:"mt-3 mb-1"},qe=Q({__name:"CloudConfig",setup($){const m=re(),g=p(!1),y=p(!1),C=p(!1),c=p(!1),b=p(!1),z=p(!1),h=p(null),L=p(!1),x=p(!1),V=p(!1),k=p(!1),I=p(!1);J(()=>{g.value=m.config.autoSync,u.on("importConfirm",()=>{b.value=!0}).on("importWorkspaceConfirm",()=>{z.value=!0}).on("importResult",({success:e,message:o,cancel:s})=>{if(b.value=!1,z.value=!1,s)return;O({duration:e?1e3:2e3,message:o,type:e?"success":"error"})}).on("downloadConfirm",()=>{V.value=!1,c.value=!0}).on("downloadResult",({success:e,message:o})=>{V.value=!1,O({duration:e?1e3:3e3,message:o,type:e?"success":"error"})}).on("uploadRes",({success:e,message:o})=>{L.value=!1,O({duration:e?1e3:3e3,message:o,type:e?"success":"error"})}).on("removeRes",({success:e,message:o})=>{x.value=!1,O({duration:e?1e3:3e3,message:o,type:e?"success":"error"})}).on("syncKey",e=>{(!h.value||k.value)&&(h.value=e,k.value=!1)})});const d=()=>{u.emit("updateOption",{name:"autoSync",value:g.value})},P=()=>{se(`Width: ${window.innerWidth}, Height: ${window.innerHeight}`)},f=()=>{u.emit("clearCache")},Y=()=>{u.emit("open","https://github.com/cweijan/vscode-database-client/issues")},Z=()=>{u.emit("open","https://github.com/cweijan/vscode-database-client/wiki/About-Cloud-Sync")},ee=()=>{k.value=!0,u.emit("chooseSyncKey")},R=e=>{u.emit("editConfig",e)},D=e=>{u.emit("exportConfig",e)},E=(e={})=>{console.log(e),u.emit("importConfig",e)},oe=()=>{if(!m.isPay){G("Free account not support upload configuration!");return}y.value=!1,L.value=!0,u.emit("uploadConfig",h.value)},te=()=>{C.value=!1,x.value=!0,u.emit("removeConfig")},N=e=>{if(!m.isPay){G("Free account not support sync data!");return}c.value=!1,V.value=!0,u.emit("downloadConfig",{keyPath:h.value,type:e})};return(e,o)=>{const s=q("vsc-button"),w=me,M=q("pay-badge"),ne=pe,le=X;return v(),_("div",null,[t(B,{class:"!mb-3"},{default:n(()=>[a("div",$e,[a("div",be,l(e.$t("console.configuration")),1),a("section",we,[t(M,null,{default:n(()=>[i(l(e.$t("connect.current"))+": ",1),t(s,{type:"secondary",icon:"codicon-edit",disabled:!S(m).isPay,size:"mini",onClick:o[0]||(o[0]=r=>R(!0))},null,8,["disabled"]),t(s,{icon:"codicon-arrow-down",disabled:!S(m).isPay,size:"mini",onClick:o[1]||(o[1]=r=>D(!0))},null,8,["disabled"]),t(w,{placement:"top",visible:z.value,trigger:"manual",class:"ml-7px"},{reference:n(()=>[t(s,{icon:"codicon-arrow-up",disabled:!S(m).isPay,size:"mini",onClick:o[5]||(o[5]=r=>E({workspace:!0}))},null,8,["disabled"])]),default:n(()=>[a("p",null,l(e.$t("console.mergeConfirm")),1),a("div",he,[t(s,{type:"secondary",size:"mini",onClick:o[2]||(o[2]=r=>z.value=!1)},{default:n(()=>[i(l(e.$t("common.cancel")),1)]),_:1}),t(s,{onClick:o[3]||(o[3]=r=>E({type:"merge",workspace:!0}))},{default:n(()=>[i(l(e.$t("console.merge")),1)]),_:1}),t(s,{onClick:o[4]||(o[4]=r=>E({type:"overwrite",workspace:!0}))},{default:n(()=>[i(l(e.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])]),_:1})]),a("section",ke,[i(l(e.$t("connect.global"))+": ",1),t(s,{type:"secondary",icon:"codicon-edit",size:"mini",onClick:R},{default:n(()=>[i(l(e.$t("console.edit")),1)]),_:1}),t(s,{icon:"codicon-arrow-down",size:"mini",onClick:D},{default:n(()=>[i(l(e.$t("console.export")),1)]),_:1}),t(w,{placement:"top",visible:b.value,trigger:"manual",class:"ml-7px"},{reference:n(()=>[t(s,{icon:"codicon-arrow-up",size:"mini",onClick:o[9]||(o[9]=r=>E())},{default:n(()=>[i(l(e.$t("console.import")),1)]),_:1})]),default:n(()=>[a("p",null,l(e.$t("console.mergeConfirm")),1),a("div",Se,[t(s,{type:"secondary",onClick:o[6]||(o[6]=r=>b.value=!1)},{default:n(()=>[i(l(e.$t("common.cancel")),1)]),_:1}),t(s,{onClick:o[7]||(o[7]=r=>E({type:"merge"}))},{default:n(()=>[i(l(e.$t("console.merge")),1)]),_:1}),t(s,{onClick:o[8]||(o[8]=r=>E({type:"overwrite"}))},{default:n(()=>[i(l(e.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])])])]),_:1}),t(B,{class:"!mb-3"},{default:n(()=>[a("div",null,[a("div",ze,[i(l(e.$t("console.sync"))+" ",1),t(s,{class:"ml-2",size:"mini",onClick:Z},{default:n(()=>[Ve,i(" Wiki ")]),_:1})]),a("div",Ee,[a("label",Oe,l(e.$t("console.autoSync")),1),t(ne,{modelValue:g.value,"onUpdate:modelValue":o[10]||(o[10]=r=>g.value=r),onChange:d},null,8,["modelValue"])]),a("div",null,[t(w,{placement:"top",visible:C.value,trigger:"manual"},{reference:n(()=>[t(s,{type:"secondary",size:"mini",icon:"codicon-trash",loading:x.value,onClick:o[12]||(o[12]=r=>C.value=!0)},{default:n(()=>[i(l(e.$t("console.remove")),1)]),_:1},8,["loading"])]),default:n(()=>[a("p",Le,l(e.$t("console.removeConfirm")),1),a("div",xe,[t(s,{type:"secondary",size:"mini",onClick:o[11]||(o[11]=r=>C.value=!1)},{default:n(()=>[i(l(e.$t("common.cancel")),1)]),_:1}),t(s,{size:"mini",onClick:te},{default:n(()=>[i(l(e.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),t(w,{placement:"top",visible:y.value,trigger:"manual",class:"ml-7px"},{reference:n(()=>[t(s,{icon:"codicon-cloud-upload",size:"mini",loading:L.value,onClick:o[14]||(o[14]=r=>y.value=!0)},{default:n(()=>[i(l(e.$t("console.upload")),1)]),_:1},8,["loading"])]),default:n(()=>[a("p",We,l(e.$t("console.uploadConfirm")),1),a("div",Ae,[t(s,{type:"secondary",onClick:o[13]||(o[13]=r=>y.value=!1)},{default:n(()=>[i(l(e.$t("common.cancel")),1)]),_:1}),t(s,{onClick:oe},{default:n(()=>[i(l(e.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),t(w,{placement:"top",visible:c.value,trigger:"manual",class:"ml-7px"},{reference:n(()=>[t(s,{icon:"codicon-cloud-download",size:"mini",loading:V.value,onClick:o[18]||(o[18]=r=>N())},{default:n(()=>[i(l(e.$t("console.download")),1)]),_:1},8,["loading"])]),default:n(()=>[a("p",Be,l(e.$t("console.mergeConfirm")),1),a("div",Ie,[t(s,{type:"secondary",onClick:o[15]||(o[15]=r=>c.value=!1)},{default:n(()=>[i(l(e.$t("common.cancel")),1)]),_:1}),t(s,{onClick:o[16]||(o[16]=r=>N("merge"))},{default:n(()=>[i(l(e.$t("console.merge")),1)]),_:1}),t(s,{onClick:o[17]||(o[17]=r=>N("overwrite"))},{default:n(()=>[i(l(e.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"]),a("div",Pe,[t(le,{modelValue:h.value,"onUpdate:modelValue":o[19]||(o[19]=r=>h.value=r),size:"small",class:"!w-56",placeholder:"Sync Encryption Key(Optional)"},null,8,["modelValue"]),t(s,{icon:"codicon-file",size:"mini",class:"!ml-1 relative",style:{top:"3px"},onClick:ee})])])])]),_:1}),t(B,null,{default:n(()=>[a("div",null,[a("div",Ne,l(e.$t("console.other")),1),I.value?(v(),_("div",Ke,[t(s,{icon:"codicon-gear",size:"mini",onClick:P},{default:n(()=>[i(" 获取页面宽高 ")]),_:1})])):T("",!0),a("div",Ue,[t(s,{icon:"codicon-chrome-close",size:"mini",onClick:o[20]||(o[20]=r=>{S(u).emit("closeAllConnections")})},{default:n(()=>[i(l(e.$t("toolbar.closeAllConnections")),1)]),_:1})]),a("div",je,[t(s,{icon:"codicon-github-inverted",size:"mini",onClick:Y},{default:n(()=>[i(l(e.$t("toolbar.reportIssue")),1)]),_:1}),t(s,{icon:"codicon-clear-all",size:"mini",onClick:f},{default:n(()=>[i(l(e.$t("toolbar.clearCache")),1)]),_:1})])])]),_:1})])}}}),Qe=F(qe,[["__scopeId","data-v-a4cc8481"]]),Fe={editor:["disableSqlCodeLenNew","splitSQLByNewLine","highlightSQLBlock","bindConnectionByActiveMark","confirmWhenUpdateWithoutWhere","executeCursorSQLByShortcut"],result:["openResultsAsVertically","splitEditorWhenQuery","reloadAfterDML","autoGetTableCount"],treeView:["showUser","saveConnectionExpandedState"],sql:["escapedAllObjectName","capitalizeKeywordsWhenFormatting","autoPagingSQL","queryWithSchema","maxSQLParseLength"]};function A($,m){const g=Fe[$];return m.filter(y=>g.includes(y.name)).sort((y,C)=>g.indexOf(y.name)-g.indexOf(C.name))}const H={escapedAllObjectName:[{value:"auto",label:"Auto"},{value:"never",label:"Never"},{value:"always",label:"Always"}]},Re={class:"flex flex-wrap justify-center console-container"},De={class:"option-container"},Me={class:"option-title"},Ge={class:"option-list"},He={key:0},Je={key:2},Te=Q({__name:"console",setup($){const m=p([]),g=ue(()=>[{title:W("console.editorOptions"),options:A("editor",m.value)},{title:W("console.sqlOptions"),options:A("sql",m.value)},{title:W("console.treeOptions"),options:A("treeView",m.value)},{title:W("console.resultOptions"),options:A("result",m.value)}]);J(async()=>{u.emit("options").on("options",({options:c})=>{m.value=c}).on("configSuccess",c=>{O({message:c,type:"success"})}).on("resetSuccess",c=>{O({message:c,type:"success"}),u.emit("options")}).init()});const y=c=>{u.emit("resetOption",c)},C=c=>{let b=c.value;c.type=="boolean"&&(b=!c.value,c.value=b),u.emit("updateOption",{...c,value:b})};return(c,b)=>{const z=q("vsc-button"),h=ve,L=fe,x=ge,V=X;return v(),_("div",Re,[t(Qe),a("div",De,[(v(!0),_(K,null,U(g.value,(k,I)=>(v(),j(B,{key:I,style:{"max-width":"350px","min-width":"300px"}},{default:n(()=>[a("div",Me,l(k.title),1),t(z,{icon:"codicon-refresh",size:"micro",title:S(W)("console.resetConfig"),onClick:d=>y(k.options)},null,8,["title","onClick"]),a("div",Ge,[(v(!0),_(K,null,U(k.options,(d,P)=>(v(),_("div",{key:P,class:"option-item"},[S(H)[d.name]?(v(),_("div",He,[i(l(d.description)+" ",1),t(L,{modelValue:d.value,"onUpdate:modelValue":f=>d.value=f,class:"w-28",size:"small",onChange:f=>C(d)},{default:n(()=>[(v(!0),_(K,null,U(S(H)[d.name],f=>(v(),j(h,{key:f.value,value:f.value,label:f.label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):d.type=="boolean"?(v(),j(x,{key:1,"model-value":d.value,onChange:f=>C(d)},{default:n(()=>[i(l(d.description),1)]),_:2},1032,["model-value","onChange"])):["string","number"].includes(d.type)?(v(),_("div",Je,[i(l(d.description)+" ",1),t(V,{modelValue:d.value,"onUpdate:modelValue":f=>d.value=f,size:"small",class:"!w-20 ml-1",onChange:f=>C(d)},null,8,["modelValue","onUpdate:modelValue","onChange"])])):T("",!0)]))),128))])]),_:2},1024))),128))])])}}}),go=F(Te,[["__scopeId","data-v-391da421"]]);export{go as default};
